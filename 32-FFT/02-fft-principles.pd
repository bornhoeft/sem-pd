#N canvas 398 38 982 871 12;
#X obj 120 367 cnv 15 60 200 empty empty empty 20 12 0 14 #ffc7c6 #404040 0;
#X msg 562 215 bang;
#X obj 125 379 rfft~;
#N canvas 0 22 1021 636 (subpatch) 0;
#X array \$0-oneblock 65 float 0;
#X coords 0 1 64 -1 180 100 1 0 0;
#X restore 239 191 graph;
#X msg 357 466 bang;
#X msg 357 409 bang;
#X msg 258 706 bang;
#X obj 125 528 rifft~;
#X obj 187 473 *~;
#X obj 223 474 *~;
#X obj 190 541 sqrt~;
#X msg 240 547 bang;
#X obj 38 211 / 64;
#X floatatom 38 238 7 0 0 0 - - - 0;
#X obj 38 333 tabwrite~ \$0-oneblock;
#X obj 545 189 tabreceive~ \$0-oneblock;
#X obj 127 796 dac~;
#X obj 127 754 *~;
#X obj 148 732 hsl 50 15 0 1 0 0 empty empty empty -2 -8 0 10 #fcfcfc #000000 #000000 0 1;
#X text 78 212 block size = bin;
#X text 93 239 frequency (Hz);
#X text 174 678 normalise = / blocksize;
#X obj 545 250 print~ amplitude;
#X obj 357 436 print~ imgaginary;
#X obj 357 492 print~ real;
#X obj 225 579 print~ magnitude;
#X obj 258 739 print~ normalised;
#X text 396 410 imaginary/sine = phase;
#X text 393 467 real/cosine = amplitude;
#X text 47 381 analysis;
#X text 25 528 resynthesis;
#X msg 38 56 1;
#X obj 38 30 loadbang;
#X obj 38 263 t b f;
#X obj 76 292 osc~;
#X obj 126 677 /~ 64;
#X floatatom 38 86 5 0 32 1 frequency_bins - - 0;
#X text 585 427 The Fourier transformation. divides the entire frequency spectrum into parts of equal size and determines the amplitude and phase for each part. One could in turn reconstruct the original signal from these values. The derivation of the component parts is called analysis \; the reconstruction is called resynthesis. You can realize this using the objects "rfft~" and "irfft~", f 36;
#N canvas 752 265 449 145 credits 0;
#X text 20 15 Johannes Kreidler;
#X text 24 40 www.pd-tutorial.com;
#X msg 24 73 browse http://www.pd-tutorial.com/english/ch03s08.html;
#X obj 24 97 pdcontrol;
#X connect 2 0 3 0;
#X restore 340 33 pd credits;
#X text 541 276 Amplitude = y values (one block);
#X text 353 673 Usually a normalization process is conducted after a FFT process \, because the amplitude values become fairly high;
#X msg 75 56 2.7;
#X obj 190 513 +~;
#X obj 38 112 t f b;
#X obj 70 136 samplerate~;
#X obj 38 182 *, f 5;
#X floatatom 70 160 11 0 0 0 - - - 0;
#X obj 189 641 tabwrite~ magnitude;
#X obj 201 614 metro 250;
#X obj 201 593 tgl 15 0 empty empty empty 0 -6 0 8 #fcfcfc #000000 #000000 0 1;
#N canvas 0 38 450 300 (subpatch) 0;
#X array magnitude 35 float 0;
#X coords 0 50 34 0 175 100 1 0 0;
#X restore 363 552 graph;
#X text 234 316 A Real FFT over 64 samples produces values for 33 cosine- and 33 sine-wave amplitudes with the frequencies 0 \, 1 \, 2 \, 3 \, ... \, 30 \, 31 \, 32 The first value (frequency 0) is the DC (direct current) \, the other values have to be seen in practice as factors of a fundamental-frequency which can be calculated by dividing samplerate by windowsize. The highest frequency is the nyquist-frequency (samplerate/2)., f 85;
#N canvas 585 623 369 259 magnitude 0;
#X obj 34 129 *;
#X obj 34 83 t f f;
#X obj 34 181 sqrt;
#X floatatom 34 156 5 0 0 0 - - - 0;
#X floatatom 34 205 5 0 0 0 - - - 0;
#X obj 37 24 hsl 162 19 -1 1 0 0 empty empty empty -2 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X floatatom 34 55 5 0 0 0 - - - 0;
#X text 108 108 -1 - 0 - 1 = 1 - 0 - 1;
#X connect 0 0 3 0;
#X connect 1 0 0 0;
#X connect 1 1 0 1;
#X connect 2 0 4 0;
#X connect 3 0 2 0;
#X connect 5 0 6 0;
#X connect 6 0 1 0;
#X restore 230 513 pd magnitude;
#X text 213 33 FFT Principles;
#N canvas 512 458 532 185 real-img 1;
#X msg 63 73 browse file:///Users/bornhoeft/Documents/code/github/sem-pd/32-FFT/fft-and-pd/basefreq.htm;
#X obj 63 125 pdcontrol;
#X text 62 42 Representation with complex numbers;
#X connect 0 0 1 0;
#X restore 450 492 pd real-img;
#X text 257 761 Normalised amplitude (should be the same as the original \, print amplitude above to compare)., f 62;
#X text 211 72 The size of the individual sections \, called bins \, is given by the block size. Pd always processes all tasks in blocks. Normally the block size in Pd is 64 samples. Using "print~" shows you all the values in a given block. Frequency in Bins = integer multiple of the block size. 750 Hz is the lowest fundamental possible to be analysed with a block size of 64 \, and a samplingrate of 48000 = one complete cycle. If the frequency is not an integer multiple of the bin size the magnitude is spread over several bins., f 88;
#X text 549 609 The magnitude tells you the strength of the frequency components relative to other components., f 39;
#X connect 1 0 22 0;
#X connect 2 0 7 0;
#X connect 2 0 8 0;
#X connect 2 0 8 1;
#X connect 2 0 24 0;
#X connect 2 1 7 1;
#X connect 2 1 9 1;
#X connect 2 1 9 0;
#X connect 2 1 23 0;
#X connect 4 0 24 0;
#X connect 5 0 23 0;
#X connect 6 0 26 0;
#X connect 7 0 35 0;
#X connect 8 0 42 0;
#X connect 9 0 42 1;
#X connect 10 0 25 0;
#X connect 10 0 47 0;
#X connect 11 0 25 0;
#X connect 12 0 13 0;
#X connect 13 0 33 0;
#X connect 15 0 22 0;
#X connect 17 0 16 0;
#X connect 17 0 16 1;
#X connect 18 0 17 1;
#X connect 31 0 36 0;
#X connect 32 0 31 0;
#X connect 33 0 14 0;
#X connect 33 1 34 0;
#X connect 34 0 14 0;
#X connect 34 0 2 0;
#X connect 35 0 17 0;
#X connect 35 0 26 0;
#X connect 36 0 43 0;
#X connect 41 0 36 0;
#X connect 42 0 10 0;
#X connect 43 0 45 0;
#X connect 43 1 44 0;
#X connect 44 0 46 0;
#X connect 45 0 12 0;
#X connect 46 0 45 1;
#X connect 48 0 47 0;
#X connect 49 0 48 0;

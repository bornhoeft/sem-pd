#N canvas 306 127 621 583 12;
#X floatatom 30 273 0 0 0 0 - - -;
#X obj 30 329 exp;
#X floatatom 30 355 6 0 0 0 - - -, f 6;
#X floatatom 30 466 6 0 0 0 - - -, f 6;
#X obj 30 382 - 1;
#X obj 30 303 * 0.05776;
#X obj 30 408 * -1;
#X text 108 273 <-- transposition;
#X text 151 286 (halftones);
#X obj 28 160 delwrite~ G09-del 5000;
#N canvas 0 22 545 431 info 0;
#X text 29 23 This is a classic rotating-tape-head style pitch shifter
using the vd~ variable delay object. Ther are two moving tape heads
\, each of which is loudest at the middle of its trajectory \, and
enveloped out at the moment it has to jump back (or forward) to start
another scratch. Most of the brain work is in computing how fast the
tape heads have to move to get the desired transposition.;
#X text 29 142 The "window size" is the total trajectory of the read
points in the delay line \, in milliseconds. The delay times are controlled
by a phasor~ object. The second delay time \, 180 degrees out of phase
from the first one \, is computed using the "wrap" object.;
#X text 27 232 The "window size" is the total trajectory of the read
points in the delay line \, in milliseconds. The delay times are controlled
by a phasor~ object. The second delay time \, 180 degrees out of phase
from the first one \, is computed using the "wrap" object.;
#X text 26 324 The cos~ objects compute the fadein and fadeout of the
two delay line outputs. They each traverse the positive half of the
cosine waveform (phase -0.25 to +0.25) over the time the phase goes
from one end to the other.;
#X restore 305 21 pd info;
#X obj 33 247 hsl 128 15 -24 24 0 0 empty transpose empty -2 -8 0 10
-262144 -1 -1 5550 1;
#X obj 30 540 dac~;
#X obj 30 435 / 0.05;
#X obj 28 53 adc~ 1;
#N canvas 0 29 422 383 pitchshift 0;
#X obj 39 23 inlet~;
#X obj 162 325 outlet~;
#X obj 40 203 cos~;
#X obj 77 239 *~;
#X obj 162 289 +~;
#X obj 208 116 wrap~;
#X obj 209 210 cos~;
#X obj 251 245 *~;
#X obj 208 89 +~ 0.5;
#X obj 40 151 -~ 0.5;
#X obj 40 177 *~ 0.5;
#X obj 209 149 -~ 0.5;
#X obj 209 182 *~ 0.5;
#X obj 39 52 phasor~;
#X obj 98 203 vd~ G09-del;
#X obj 272 212 vd~ G09-del;
#X obj 98 151 *~ 50;
#X obj 272 150 *~ 50;
#X connect 0 0 13 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 1 0;
#X connect 5 0 11 0;
#X connect 5 0 17 0;
#X connect 6 0 7 0;
#X connect 7 0 4 1;
#X connect 8 0 5 0;
#X connect 9 0 10 0;
#X connect 10 0 2 0;
#X connect 11 0 12 0;
#X connect 12 0 6 0;
#X connect 13 0 9 0;
#X connect 13 0 8 0;
#X connect 13 0 16 0;
#X connect 14 0 3 1;
#X connect 15 0 7 1;
#X connect 16 0 14 0;
#X connect 17 0 15 0;
#X restore 30 499 pd pitchshift;
#X text 93 447 delay window (50 ms) in sec;
#X text 92 431 tape head rotation frequency;
#X obj 29 193 loadbang;
#X msg 30 219 0;
#X text 115 322 convert semitones to src;
#X text 98 385 downward transposition (src > 0 and < 1) positive =
forward \, upward transposition (src > 1) negative = backward.;
#N canvas 479 87 504 598 test-input 0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array array1 155648 float 0;
#X coords 0 1 155647 -1 200 150 1;
#X restore 48 137 graph;
#X obj 52 527 tabread4~ array1;
#X obj 52 311 r totsamps;
#X obj 52 391 /;
#X obj 52 474 *~ 0;
#X obj 52 417 phasor~ 0;
#X obj 52 501 +~ 1;
#X msg 52 364 44100;
#X obj 52 338 t b f;
#X obj 81 446 r totsamps;
#X text 197 520 sample loop for;
#X text 197 537 test signal;
#X obj 47 31 loadbang;
#X obj 52 557 outlet~;
#X obj 291 165 r readfile;
#X obj 291 195 symbol;
#X msg 290 224 read -resize \$1 array1;
#X obj 290 252 soundfiler;
#X obj 290 280 s totsamps;
#X msg 47 65 \; readfile ../99-Sounds/1-4.wav;
#X connect 1 0 13 0;
#X connect 2 0 8 0;
#X connect 3 0 5 0;
#X connect 4 0 6 0;
#X connect 5 0 4 0;
#X connect 6 0 1 0;
#X connect 7 0 3 0;
#X connect 8 0 7 0;
#X connect 8 1 3 1;
#X connect 9 0 4 1;
#X connect 12 0 19 0;
#X connect 14 0 15 0;
#X connect 15 0 16 0;
#X connect 16 0 17 0;
#X connect 17 0 18 0;
#X restore 66 79 pd test-input;
#N canvas 0 22 428 462 switch~ 0;
#X text 63 22 switch between two audio inputs;
#X obj 75 99 inlet~;
#X text 75 81 input1;
#X obj 78 345 *~;
#X obj 202 338 *~;
#X obj 123 373 +~;
#X obj 198 94 inlet~;
#X text 199 73 input2;
#X obj 124 403 outlet~;
#X obj 260 96 inlet;
#X text 260 77 toggle;
#X obj 290 284 line~;
#X obj 290 309 cos~;
#X obj 99 288 line~;
#X obj 99 315 cos~;
#X obj 99 262 pack;
#X obj 98 205 t f b;
#X obj 290 257 pack;
#X obj 278 222 - 0.25;
#X obj 278 194 t f b;
#X obj 260 153 / 4;
#X obj 260 123 line;
#X msg 134 233 5;
#X msg 339 222 5;
#X text 61 43 with toggle on it switches to 2nd input;
#X connect 1 0 3 0;
#X connect 3 0 5 0;
#X connect 4 0 5 1;
#X connect 5 0 8 0;
#X connect 6 0 4 0;
#X connect 9 0 21 0;
#X connect 11 0 12 0;
#X connect 12 0 4 1;
#X connect 13 0 14 0;
#X connect 14 0 3 1;
#X connect 15 0 13 0;
#X connect 16 0 15 0;
#X connect 16 1 22 0;
#X connect 17 0 11 0;
#X connect 18 0 17 0;
#X connect 19 0 18 0;
#X connect 19 1 23 0;
#X connect 20 0 16 0;
#X connect 20 0 19 0;
#X connect 21 0 20 0;
#X connect 22 0 15 1;
#X connect 23 0 17 1;
#X restore 28 128 pd switch~;
#X obj 105 106 tgl 15 1 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X text 126 106 switch between audio inputs;
#X text 26 20 Rotating-Tape-Head Pitch Shifter;
#X connect 0 0 5 0;
#X connect 1 0 2 0;
#X connect 2 0 4 0;
#X connect 3 0 15 0;
#X connect 4 0 6 0;
#X connect 5 0 1 0;
#X connect 6 0 13 0;
#X connect 11 0 0 0;
#X connect 13 0 3 0;
#X connect 14 0 23 0;
#X connect 15 0 12 0;
#X connect 15 0 12 1;
#X connect 18 0 19 0;
#X connect 19 0 11 0;
#X connect 22 0 23 1;
#X connect 23 0 9 0;
#X connect 24 0 23 2;

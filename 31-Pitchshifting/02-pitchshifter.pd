#N canvas 255 97 382 570 12;
#X floatatom 30 433 0 0 0 0 - - - 0;
#N canvas 459 116 490 492 info 0;
#X text 33 24 The rotating tape heads read the signal at a speed independent from the tape playback speed. The tape speed relative to the machine determines the time duration \, while the playback head speed relative to the tape determines the pitch.;
#X text 27 228 The "window size" is the total trajectory of the read points in the delay line \, in milliseconds. The delay times are controlled by a phasor~ object. The second delay time \, 180 degrees out of phase from the first one \, is computed using the "wrap" object. The cos~ objects compute the fadein and fadeout of the two delay line outputs. They each traverse the positive half of the cosine waveform (phase -0.25 to +0.25) over the time the phase goes from one end to the other.;
#X text 30 110 This is a classic rotating-tape-head style pitch shifter using the vd~ variable delay object. Ther are two moving tape heads \, each of which is loudest at the middle of its trajectory \, and enveloped out at the moment it has to jump back (or forward) to start another scratch. Most of the brain work is in computing how fast the tape heads have to move to get the desired transposition.;
#X msg 31 404 browse https://www.katjaas.nl/pitchshift/pitchshift.html;
#X obj 31 428 pdcontrol;
#X text 27 378 online information:;
#X connect 3 0 4 0;
#X restore 305 21 pd info;
#X obj 30 531 dac~;
#N canvas 583 122 380 420 pitchshift 0;
#X obj 163 377 outlet~;
#X obj 41 255 cos~;
#X obj 78 291 *~;
#X obj 163 341 +~;
#X obj 209 168 wrap~;
#X obj 210 262 cos~;
#X obj 252 297 *~;
#X obj 209 141 +~ 0.5;
#X obj 41 203 -~ 0.5;
#X obj 41 229 *~ 0.5;
#X obj 210 201 -~ 0.5;
#X obj 210 234 *~ 0.5;
#X obj 40 104 phasor~;
#X obj 99 255 vd~ G09-del;
#X obj 273 264 vd~ G09-del;
#X obj 99 203 *~ 50;
#X obj 273 202 *~ 50;
#X floatatom 40 77 6 0 0 0 - - - 0;
#X obj 40 51 / 0.05;
#X text 103 63 delay window (50 ms) in sec;
#X text 102 47 tape head rotation frequency;
#X obj 40 24 inlet;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 0 0;
#X connect 4 0 10 0;
#X connect 4 0 16 0;
#X connect 5 0 6 0;
#X connect 6 0 3 1;
#X connect 7 0 4 0;
#X connect 8 0 9 0;
#X connect 9 0 1 0;
#X connect 10 0 11 0;
#X connect 11 0 5 0;
#X connect 12 0 8 0;
#X connect 12 0 7 0;
#X connect 12 0 15 0;
#X connect 13 0 2 1;
#X connect 14 0 6 1;
#X connect 15 0 13 0;
#X connect 16 0 14 0;
#X connect 17 0 12 0;
#X connect 18 0 17 0;
#X connect 21 0 18 0;
#X restore 30 490 pd pitchshift;
#X obj 30 362 loadbang;
#X msg 30 387 0;
#X text 127 459 convert semitones to src;
#X text 113 65 switch between audio inputs;
#X text 26 20 Rotating-Tape-Head Pitch Shifter;
#N canvas 795 38 460 667 test-input 0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array array1 169413 float 0;
#X coords 0 1 169412 -1 200 150 1;
#X restore 48 137 graph;
#X obj 34 671 tabread4~ array1;
#X obj 52 311 r totsamps;
#X obj 52 438 /, f 5;
#X obj 34 646 +~ 1;
#X obj 52 592 r totsamps;
#X obj 47 31 loadbang;
#X obj 34 699 outlet~;
#X obj 271 144 r readfile;
#X obj 271 174 symbol;
#X msg 270 203 read -resize \$1 array1;
#X obj 270 231 soundfiler;
#X obj 270 259 s totsamps;
#X obj 34 562 phasor~;
#X obj 34 619 *~;
#X floatatom 52 462 9 0 0 0 - - - 0;
#X obj 34 486 inlet;
#X obj 98 363 samplerate~;
#X floatatom 98 387 6 0 0 0 - - - 0;
#X obj 52 411 f, f 7;
#X obj 34 513 *;
#X text 92 563 sample loop signal;
#X obj 52 338 t b f b;
#X floatatom 34 537 5 0 0 0 - - - 0;
#X msg 47 65 \; readfile ../Sounds/1-4.wav;
#X obj 232 399 t b f;
#X msg 232 423 1;
#X obj 233 471 spigot;
#X obj 272 445 inlet;
#X obj 232 447 -;
#X obj 233 521 s pair;
#X floatatom 233 495 5 0 0 0 - - - 0;
#X connect 1 0 7 0;
#X connect 2 0 22 0;
#X connect 3 0 15 0;
#X connect 4 0 1 0;
#X connect 5 0 14 1;
#X connect 6 0 24 0;
#X connect 8 0 9 0;
#X connect 9 0 10 0;
#X connect 10 0 11 0;
#X connect 11 0 12 0;
#X connect 13 0 14 0;
#X connect 14 0 4 0;
#X connect 15 0 20 1;
#X connect 16 0 20 0;
#X connect 17 0 18 0;
#X connect 18 0 19 1;
#X connect 19 0 3 0;
#X connect 20 0 23 0;
#X connect 22 0 19 0;
#X connect 22 1 3 1;
#X connect 22 2 17 0;
#X connect 23 0 13 0;
#X connect 25 0 26 0;
#X connect 25 1 29 1;
#X connect 26 0 29 0;
#X connect 27 0 31 0;
#X connect 28 0 27 1;
#X connect 29 0 27 0;
#X connect 31 0 30 0;
#X restore 66 196 pd test-input;
#X obj 30 322 delwrite~ G09-del 2000;
#X obj 30 68 hradio 19 1 0 4 empty empty empty 0 -10 0 12 #00ff04 #000000 #000000 0;
#N canvas 706 121 300 327 switch-source 0;
#X floatatom 22 52 5 0 0 0 - - - 0;
#X obj 78 81 inlet~;
#X obj 21 20 inlet;
#X obj 97 109 == 1;
#X obj 96 132 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X msg 96 156 \$1 50;
#X obj 96 180 line;
#X floatatom 96 204 5 0 0 0 - - - 0;
#X obj 78 227 *~;
#X obj 146 82 inlet~;
#X obj 164 133 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X msg 164 157 \$1 50;
#X obj 164 181 line;
#X floatatom 164 205 5 0 0 0 - - - 0;
#X obj 146 281 outlet~;
#X obj 146 228 *~;
#X obj 218 80 inlet~;
#X obj 236 131 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X msg 236 155 \$1 50;
#X obj 236 179 line;
#X floatatom 236 203 5 0 0 0 - - - 0;
#X obj 218 226 *~;
#X obj 165 110 == 2;
#X obj 237 108 == 3;
#X connect 0 0 3 0;
#X connect 0 0 22 0;
#X connect 0 0 23 0;
#X connect 1 0 8 0;
#X connect 2 0 0 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X connect 7 0 8 1;
#X connect 8 0 14 0;
#X connect 9 0 15 0;
#X connect 10 0 11 0;
#X connect 11 0 12 0;
#X connect 12 0 13 0;
#X connect 13 0 15 1;
#X connect 15 0 14 0;
#X connect 16 0 21 0;
#X connect 17 0 18 0;
#X connect 18 0 19 0;
#X connect 19 0 20 0;
#X connect 20 0 21 1;
#X connect 21 0 14 0;
#X connect 22 0 10 0;
#X connect 23 0 17 0;
#X restore 30 289 pd switch-source;
#X obj 139 249 adc~;
#X obj 69 145 hsl 162 19 -2 2 0 1 empty transpose playback\ speed 20 10 0 12 #00ff04 #000000 #000000 12075 1;
#X floatatom 66 171 5 0 0 0 - - - 0;
#X msg 66 118 1;
#X obj 66 93 loadbang;
#X obj 33 410 hsl 162 19 -24 24 0 1 empty transpose transposition\ semitones 5 10 0 10 #00ff04 #000000 #000000 8050 1;
#X obj 154 172 tgl 19 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#N canvas 656 233 521 381 buffer-read 0;
#X obj 30 22 adc~;
#X obj 43 77 tabwrite~ \$0-audio;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-audio 44100 float 2;
#X coords 0 1 44100 -1 300 100 1;
#X restore 189 37 graph;
#X obj 31 198 phasor~;
#X obj 31 309 tabread4~ \$0-audio;
#X floatatom 31 145 5 0 0 0 - - - 0;
#X obj 31 117 inlet;
#X obj 31 339 outlet~;
#X obj 91 22 inlet;
#X obj 62 222 samplerate~;
#X floatatom 62 246 6 0 0 0 - - - 0;
#X obj 31 170 t f b;
#X obj 31 275 *~;
#X connect 0 0 1 0;
#X connect 0 1 1 0;
#X connect 3 0 12 0;
#X connect 4 0 7 0;
#X connect 5 0 11 0;
#X connect 6 0 5 0;
#X connect 8 0 1 0;
#X connect 9 0 10 0;
#X connect 10 0 12 1;
#X connect 11 0 3 0;
#X connect 11 1 9 0;
#X connect 12 0 4 0;
#X restore 102 225 pd buffer-read;
#N canvas 713 350 473 224 semitones 0;
#X obj 29 14 inlet;
#X obj 29 68 exp;
#X floatatom 29 94 6 0 0 0 - - - 0;
#X obj 29 121 - 1;
#X obj 29 42 * 0.05776;
#X obj 29 147 * -1;
#X text 83 80 downward transposition (src > 0 and < 1) \; upward transposition (src > 1) \; positive numbers = forward \, negative = backward.;
#X obj 29 171 outlet;
#X connect 0 0 4 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 5 0;
#X connect 4 0 1 0;
#X connect 5 0 7 0;
#X restore 30 460 pd semitones;
#X obj 197 199 bng 19 250 50 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000;
#X connect 0 0 21 0;
#X connect 3 0 2 0;
#X connect 3 0 2 1;
#X connect 4 0 5 0;
#X connect 5 0 18 0;
#X connect 9 0 12 1;
#X connect 11 0 12 0;
#X connect 12 0 10 0;
#X connect 13 0 12 3;
#X connect 13 1 12 3;
#X connect 14 0 15 0;
#X connect 14 0 20 0;
#X connect 15 0 9 0;
#X connect 16 0 14 0;
#X connect 17 0 16 0;
#X connect 18 0 0 0;
#X connect 19 0 9 1;
#X connect 20 0 12 2;
#X connect 21 0 3 0;
#X connect 22 0 20 1;
